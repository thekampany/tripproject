{% extends "base_generic.html" %}
{% load i18n %}
{% block content %}
<h2>{% trans "Itinerary Ideas" %}</h2>

<style>
.dropdown {
  position: relative;
  display: block;
  width: 100%;
}

.dropdown-button {
  background-color: silver;
  color: black;
  padding: 10px 16px;
  width: 100%;
  font-size: 16px;
  border: none;
  cursor: pointer;
  border-radius: 4px;
  text-align: left;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  width: 100%;
  box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
  z-index: 1;
  border-radius: 4px;
  overflow: hidden;
}

.dropdown-content a {
  color: black;
  padding: 10px 16px;
  text-decoration: none;
  display: block;
}

.dropdown-content a:hover {
  background-color: #f1f1f1;
}

</style>

<div class="dropdown">
  <button class="dropdown-button">{% trans "Create New" %}</button>
  <div class="dropdown-content">
    <a href="/itineraryidea/overnightlocations/">{% trans "on Map via OvernightLocations" %}</a>
    <a href="/itineraryidea/daylocations/">{% trans "on Map via DayLocations" %}</a>
    <a href="/itineraryidea/">via Import</a>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const dropdownBtn = document.querySelector(".dropdown-button");
  const dropdownContent = document.querySelector(".dropdown-content");

  dropdownBtn.addEventListener("click", function(e) {
    e.stopPropagation();
    dropdownContent.style.display = dropdownContent.style.display === "block" ? "none" : "block";
  });

  document.addEventListener("click", function() {
    dropdownContent.style.display = "none";
  });
});
</script>

<p>&nbsp;</p>

{% for idea in itineraryideas %}
  <div class="itinerary-idea" style="border:1px solid #ccc; padding:10px; margin-bottom:10px;">
    <strong>{{ idea.name }}</strong>
    <span style="float:right; color:gray; font-style:italic;">
      {% if idea.updated_at %}
        {{ idea.created_by.username }} - Last update: {{ idea.updated_by.username }}&nbsp;{{ idea.updated_at|date:"Y-m-d H:i" }}
      {% else %}
        {{ idea.created_by.username }} - Created: {{ idea.created_at|date:"Y-m-d H:i" }}
      {% endif %}
    </span>
    <br><br>

    <div style="float:left;">
      <a href="{% url 'tripapp:itineraryidea-edit' idea.pk %}">
        <button type="button">{% trans "Edit on Map" %}</button>
      </a>
      <a href="{% url 'tripapp:itineraryidea-to-trip' idea.pk %}">
        <button type="button">{% trans "Convert to Trip" %}</button>
      </a>
    </div>

    <div style="float:right;">
      <form method="post" action="{% url 'tripapp:itineraryidea-delete' idea.pk %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit" onclick="return confirm('{% trans "Are you sure?" %}')">{% trans "Delete" %}</button>
      </form>
    </div>

    <div style="clear:both;"></div>
  </div>
{% empty %}
  <p>{% trans "No itinerary ideas yet." %}</p>
{% endfor %}
<p>&nbsp;</p>
<a href="{% url 'tripapp:tribe_trips' %}">&larr;{% trans "Organize" %}</a>
{% endblock %}
